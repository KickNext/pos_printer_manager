# =============================================================================
# Lefthook — конфигурация git-хуков для Flutter/Dart проекта
# Документация: https://lefthook.dev/configuration/
# =============================================================================

# Pre-commit хук — запускается перед каждым коммитом
pre-commit:
  # Запускать команды параллельно для скорости
  parallel: true
  
  jobs:
    # =========================================================================
    # Форматирование Dart-файлов
    # =========================================================================
    - name: dart-format
      glob: "*.dart"
      run: dart format --fix {staged_files}
      # Автоматически добавить отформатированные файлы в коммит
      stage_fixed: true
    
    # =========================================================================
    # Статический анализ Dart-кода
    # =========================================================================
    - name: dart-analyze
      glob: "*.dart"
      run: dart analyze {staged_files}

# =============================================================================
# Pre-push хук — запускается перед push (опционально)
# Раскомментируйте, если хотите запускать тесты перед push
# =============================================================================
# pre-push:
#   jobs:
#     - name: flutter-test
#       run: flutter test
#       fail_text: "Тесты не прошли!"
